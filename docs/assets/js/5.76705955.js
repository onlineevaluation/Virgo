(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{172:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结构","aria-hidden":"true"}},[t._v("#")]),t._v(" 结构")]),t._v(" "),a("p",[t._v("项目基本是采用 Go 的协程完善的一个代码。基本实现思路如下。")]),t._v(" "),a("ol",[a("li",[t._v("编译程序，确保程序可以通过编译")]),t._v(" "),a("li",[t._v("对程序进行运行")]),t._v(" "),a("li",[t._v("监听运行过程，包括时间内存等。")])]),t._v(" "),a("h2",{attrs:{id:"主要函数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#主要函数","aria-hidden":"true"}},[t._v("#")]),t._v(" 主要函数")]),t._v(" "),a("h3",{attrs:{id:"judegecode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#judegecode","aria-hidden":"true"}},[t._v("#")]),t._v(" judegeCode")]),t._v(" "),a("p",[t._v("这个函数为外部调用的入口函数，通过注释，使函数打包时，提供入口")]),t._v(" "),a("div",{staticClass:"language-go line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//export judgeCode")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("judgeCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" outputPath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fileName "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" limitTime "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("char \n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br")])]),a("h4",{attrs:{id:"输入参数说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输入参数说明","aria-hidden":"true"}},[t._v("#")]),t._v(" 输入参数说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("filePath")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("要编译的文件路径")])]),t._v(" "),a("tr",[a("td",[t._v("outputPath")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("输出文件路径")])]),t._v(" "),a("tr",[a("td",[t._v("fileName")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("输出文件名称")])]),t._v(" "),a("tr",[a("td",[t._v("data")]),t._v(" "),a("td",[t._v("string")]),t._v(" "),a("td",[t._v("测评数据格式 详细格式如下")])]),t._v(" "),a("tr",[a("td",[t._v("limitTIme")]),t._v(" "),a("td",[t._v("int64")]),t._v(" "),a("td",[t._v("代码运行时间")])])])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"datas"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"input"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[1,2]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" \n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"output"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[3]"')]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"input"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[3,6]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"output"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"[9]"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("h4",{attrs:{id:"返回值说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#返回值说明","aria-hidden":"true"}},[t._v("#")]),t._v(" 返回值说明")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("类型")]),t._v(" "),a("th",[t._v("说明")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("返回运行结果")]),t._v(" "),a("td",[t._v("*C.char")]),t._v(" "),a("td",[t._v("运行结果说明,返回状态码")])])])]),t._v(" "),a("p",[t._v("状态码说明")]),t._v(" "),a("ul",[a("li",[t._v("0 没有安装 gcc 环境")]),t._v(" "),a("li",[t._v("1 代码无法进行编译")]),t._v(" "),a("li",[t._v("2 运行超时")]),t._v(" "),a("li",[t._v("3 运行出错")]),t._v(" "),a("li",[t._v("4 未知错误")]),t._v(" "),a("li",[t._v("5 json格式错误")]),t._v(" "),a("li",[t._v("8 部分运行结果错误")]),t._v(" "),a("li",[t._v("9 运行全部通过")])]),t._v(" "),a("h3",{attrs:{id:"runinwindows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runinwindows","aria-hidden":"true"}},[t._v("#")]),t._v(" runInWindows")]),t._v(" "),a("p",[t._v("通过对当前系统判断，如果是 windows 操作系统，则进行该函数运算。")]),t._v(" "),a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("为什么要这样")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("*nix")]),t._v(" 中，通过终端执行命令基本相同，而 "),a("code",[t._v("windows")]),t._v(" 中 通过 "),a("code",[t._v("cmd")]),t._v(" 或者 "),a("code",[t._v("powershell")]),t._v(" 进行执行，命令参数与 "),a("code",[t._v("*nix")]),t._v(" 中很多不一样，故专门用改函数进行处理。")])]),t._v(" "),a("p",[t._v("首先对目标文件进行编译，确保编译正确后，在运行。")]),t._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("gcc -pedantic [filePath] -o [filename]\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("在编译之前，通过如上命令可以对目标文件进行错误检查，并返回错误情况。")]),t._v(" "),a("p",[t._v("在这里终端使用的是 "),a("code",[t._v("powershell")]),t._v(" 。 使用 "),a("code",[t._v("cmd")]),t._v(" 无法获取错误信息流。")]),t._v(" "),a("h3",{attrs:{id:"runinxnix"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runinxnix","aria-hidden":"true"}},[t._v("#")]),t._v(" runInXnix")]),t._v(" "),a("p",[t._v("该函数目前未实现，主要用于对 "),a("code",[t._v("linux")]),t._v(" 和 "),a("code",[t._v("macOS")]),t._v(" 上进行。")]),t._v(" "),a("h3",{attrs:{id:"judeg"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#judeg","aria-hidden":"true"}},[t._v("#")]),t._v(" judeg")]),t._v(" "),a("p",[t._v("judge 函数对目标文件进行计时，并且通过协程对编译后的可执行文件进行运行。当运行超时时，对该可执行文件进行处理，将其进程杀死。")]),t._v(" "),a("h3",{attrs:{id:"runcode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#runcode","aria-hidden":"true"}},[t._v("#")]),t._v(" runCode")]),t._v(" "),a("p",[t._v("该函数主要对输入输出数据进行处理，通过将数据读入 终端，之后对输出数据和答案进行比对，得出正确答案。")])])}],!1,null,null,null);s.default=e.exports}}]);